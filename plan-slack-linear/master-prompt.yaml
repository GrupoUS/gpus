# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# PRP: GPUS COLLABORATION & PROJECT MANAGEMENT SUITE
# Inspired by Slack (Communication) + Linear (Issue Tracking)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

metadata:
  complexity: "L8 â€” Multi-module system with real-time communication, issue tracking, workflow automation, and complex data relationships"
  estimated_time: "4-6 weeks (phased delivery)"
  parallel_safe: false
  version: "1.0.0"
  codename: "GPUS-Collab"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 1: ROLE & OBJECTIVE
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
role: "Senior Full-Stack Architect"
expertise_areas:
  - "Real-time communication systems (WebSockets, SSE)"
  - "Reactive databases (Convex)"
  - "Issue tracking and workflow engines"
  - "Brazilian market (LGPD compliance, PIX integration potential)"
  - "EdTech platforms for health aesthetics"

objective:
  task: "Design and implement a unified collaboration platform combining Slack-style communication with Linear-style project management for GPUS"
  context: |
    GPUS (Grupo US) is an educational company focused on health aesthetics training.
    Current products: TRINTAE3, OTB MBA, Black NEON, and specialized courses.
    Target users: Healthcare professionals transitioning to aesthetic entrepreneurship.
    Revenue: ~R$500k/month requiring robust team coordination tools.
  why_this_matters: |
    Currently, GPUS team coordination happens across scattered tools.
    A unified platform will:
    - Centralize communication (replacing WhatsApp/Email fragmentation)
    - Track course development, student issues, and internal projects
    - Enable async collaboration across instructors and support staff
    - Provide visibility into what's being worked on and what's blocked
    - Create audit trail for LGPD compliance

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 2: RESEARCH DIRECTIVES (Execute Before Implementation)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
research_phase:
  mandatory_queries:
    codebase_analysis:
      - "Search GPUS codebase for existing auth patterns (Clerk integration)"
      - "Identify current database schema conventions in Convex"
      - "Find existing UI component patterns in shadcn/ui usage"
      - "Check for existing notification systems"
      - "Review current file upload/storage implementation"

    documentation_queries:
      - "Context7: Convex real-time subscriptions and optimistic updates"
      - "Context7: Convex file storage and upload patterns"
      - "Context7: TanStack Router nested layouts and route guards"
      - "Context7: shadcn/ui data tables and command palette"
      - "Web search: LGPD requirements for internal communication logs"

    best_practices:
      - "Real-time messaging architecture with Convex"
      - "Keyboard-first UI patterns (Linear-style)"
      - "Thread-based conversation data modeling"
      - "Issue state machine design patterns"

  research_outputs:
    findings_table: |
      | # | Finding | Confidence | Source | Impact |
      |---|---------|------------|--------|--------|
      | 1 | [FILL AFTER RESEARCH] | | | |
    knowledge_gaps: "Document unknowns discovered during research"
    assumptions_to_validate: "List assumptions requiring codebase verification"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 3: TECHNICAL CONTEXT (Curated Codebase Intelligence)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
environment:
  runtime: "Bun 1.1.x"
  framework: "React 19 with TanStack Router v1"
  database: "Convex (reactive, real-time)"
  auth: "Clerk (multi-tenant ready)"
  ui: "shadcn/ui + Tailwind CSS + Radix primitives"
  testing: "Vitest + Testing Library"
  state: "Convex reactive queries + React useState for local UI"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 4: FEATURE SPECIFICATION â€” SLACK-INSPIRED MODULES
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
slack_inspired_features:

  module_1_workspaces:
    description: "Organization-level containers (GPUS as primary workspace)"
    entities:
      workspace:
        fields:
          - "id: string (Convex ID)"
          - "name: string"
          - "slug: string (URL-friendly)"
          - "icon_url: string | null"
          - "owner_id: string (Clerk user ID)"
          - "settings: WorkspaceSettings (JSON)"
          - "created_at: number (timestamp)"
        indexes:
          - "by_slug: unique"
          - "by_owner: for admin queries"
      workspace_member:
        fields:
          - "workspace_id: Id<workspaces>"
          - "user_id: string (Clerk ID)"
          - "role: 'owner' | 'admin' | 'member' | 'guest'"
          - "joined_at: number"
          - "notification_preferences: NotificationPrefs"
        indexes:
          - "by_workspace_user: compound unique"
          - "by_user: for user's workspaces list"

  module_2_channels:
    description: "Topic-based conversation containers"
    entities:
      channel:
        fields:
          - "workspace_id: Id<workspaces>"
          - "name: string (e.g., 'geral', 'suporte-alunos', 'dev-trintae3')"
          - "slug: string"
          - "description: string | null"
          - "type: 'public' | 'private' | 'dm'"
          - "created_by: string"
          - "is_archived: boolean"
          - "pinned_message_ids: Id<messages>[]"
          - "last_activity_at: number"
        indexes:
          - "by_workspace: for channel list"
          - "by_workspace_slug: unique within workspace"
          - "by_last_activity: for sorting"
      channel_member:
        fields:
          - "channel_id: Id<channels>"
          - "user_id: string"
          - "last_read_at: number (for unread calculation)"
          - "is_muted: boolean"
          - "joined_at: number"
        indexes:
          - "by_channel_user: compound unique"
          - "by_user: for user's channels"
    naming_conventions:
      prefixes:
        - "geral-* : General discussion channels"
        - "proj-* : Project-specific channels"
        - "curso-* : Course-related (trintae3, otb-mba, etc)"
        - "suporte-* : Support and triage"
        - "anuncios-* : Announcements (restricted posting)"

  module_3_messaging:
    description: "Real-time chat with threads, reactions, and rich content"
    entities:
      message:
        fields:
          - "channel_id: Id<channels>"
          - "author_id: string"
          - "content: string (Markdown supported)"
          - "thread_parent_id: Id<messages> | null"
          - "reply_count: number (denormalized for threads)"
          - "reaction_summary: ReactionSummary (denormalized)"
          - "attachments: Attachment[]"
          - "mentions: Mention[]"
          - "is_edited: boolean"
          - "edited_at: number | null"
          - "created_at: number"
          - "deleted_at: number | null (soft delete)"
        indexes:
          - "by_channel_time: for message list (paginated)"
          - "by_thread_parent: for thread replies"
          - "by_author: for user's messages"
      reaction:
        fields:
          - "message_id: Id<messages>"
          - "user_id: string"
          - "emoji: string (e.g., 'ğŸ‘', 'ğŸ‰', 'âœ…')"
          - "created_at: number"
        indexes:
          - "by_message: for reaction list"
          - "by_message_user_emoji: unique (one reaction per emoji per user)"
      attachment:
        embedded_fields:
          - "type: 'file' | 'image' | 'link'"
          - "file_id: Id<_storage> | null"
          - "url: string"
          - "name: string"
          - "size: number"
          - "mime_type: string"
    features:
      threading:
        - "Reply in thread (thread_parent_id links to parent)"
        - "Thread reply count shown on parent message"
        - "Thread panel opens in sidebar"
        - "Option to 'also send to channel' for thread replies"
      mentions:
        - "@user mentions (parsed from content, stored in mentions array)"
        - "@channel for all channel members"
        - "@here for online members only"
      formatting:
        - "Markdown: bold, italic, code, links, lists"
        - "Code blocks with syntax highlighting"
        - "Blockquotes for replying context"
      search:
        - "Full-text search across messages"
        - "Filter by channel, user, date range"
        - "Search within threads"

  module_4_presence_and_notifications:
    description: "User status and notification system"
    entities:
      user_presence:
        fields:
          - "user_id: string"
          - "workspace_id: Id<workspaces>"
          - "status: 'online' | 'away' | 'dnd' | 'offline'"
          - "status_text: string | null (e.g., 'Em reuniÃ£o')"
          - "status_emoji: string | null"
          - "last_seen_at: number"
        indexes:
          - "by_workspace: for online users list"
          - "by_user_workspace: unique"
      notification:
        fields:
          - "user_id: string"
          - "workspace_id: Id<workspaces>"
          - "type: 'mention' | 'dm' | 'thread_reply' | 'channel_activity'"
          - "source_channel_id: Id<channels>"
          - "source_message_id: Id<messages>"
          - "is_read: boolean"
          - "created_at: number"
        indexes:
          - "by_user_unread: for notification badge"
          - "by_user_time: for notification list"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 5: FEATURE SPECIFICATION â€” LINEAR-INSPIRED MODULES
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
linear_inspired_features:

  module_5_teams:
    description: "Organizational units within workspace (e.g., 'Suporte', 'Desenvolvimento', 'ConteÃºdo')"
    entities:
      team:
        fields:
          - "workspace_id: Id<workspaces>"
          - "name: string"
          - "slug: string"
          - "description: string | null"
          - "icon: string (emoji or icon name)"
          - "color: string (hex for visual distinction)"
          - "default_workflow_id: Id<workflows>"
          - "settings: TeamSettings"
        indexes:
          - "by_workspace: for team list"
          - "by_workspace_slug: unique"
      team_member:
        fields:
          - "team_id: Id<teams>"
          - "user_id: string"
          - "role: 'lead' | 'member'"
          - "joined_at: number"

  module_6_issues:
    description: "Work items with state machine, priorities, and assignments"
    entities:
      issue:
        fields:
          - "team_id: Id<teams>"
          - "identifier: string (e.g., 'SUP-123', 'DEV-456')"
          - "title: string"
          - "description: string (rich text/Markdown)"
          - "state_id: Id<workflow_states>"
          - "priority: 0 | 1 | 2 | 3 | 4 (0=no priority, 1=urgent, 4=low)"
          - "assignee_id: string | null"
          - "creator_id: string"
          - "project_id: Id<projects> | null"
          - "cycle_id: Id<cycles> | null"
          - "parent_issue_id: Id<issues> | null (sub-issues)"
          - "label_ids: Id<labels>[]"
          - "due_date: number | null"
          - "estimate: number | null (story points or hours)"
          - "sort_order: number (for manual ordering)"
          - "created_at: number"
          - "updated_at: number"
          - "completed_at: number | null"
          - "canceled_at: number | null"
        indexes:
          - "by_team_state: for kanban/list views"
          - "by_assignee: for 'my issues'"
          - "by_project: for project issues"
          - "by_cycle: for sprint view"
          - "by_identifier: unique, for quick search"
      workflow:
        fields:
          - "team_id: Id<teams>"
          - "name: string"
          - "is_default: boolean"
      workflow_state:
        fields:
          - "workflow_id: Id<workflows>"
          - "name: string (e.g., 'Backlog', 'A Fazer', 'Em Progresso', 'ConcluÃ­do', 'Cancelado')"
          - "type: 'backlog' | 'unstarted' | 'started' | 'completed' | 'canceled'"
          - "color: string"
          - "position: number"
        default_states:
          - "Triagem (backlog, #6B7280)"
          - "Backlog (backlog, #9CA3AF)"
          - "A Fazer (unstarted, #3B82F6)"
          - "Em Progresso (started, #F59E0B)"
          - "Em RevisÃ£o (started, #8B5CF6)"
          - "ConcluÃ­do (completed, #10B981)"
          - "Cancelado (canceled, #EF4444)"
      label:
        fields:
          - "team_id: Id<teams>"
          - "name: string (e.g., 'bug', 'feature', 'urgente', 'curso-trintae3')"
          - "color: string"
          - "description: string | null"
      issue_comment:
        fields:
          - "issue_id: Id<issues>"
          - "author_id: string"
          - "content: string"
          - "created_at: number"
          - "edited_at: number | null"
      issue_activity:
        fields:
          - "issue_id: Id<issues>"
          - "user_id: string"
          - "type: 'state_change' | 'assignment' | 'priority' | 'label' | 'comment' | 'etc'"
          - "from_value: string | null"
          - "to_value: string | null"
          - "created_at: number"

  module_7_projects:
    description: "Group of related issues with milestones and progress tracking"
    entities:
      project:
        fields:
          - "workspace_id: Id<workspaces>"
          - "team_ids: Id<teams>[] (cross-team projects)"
          - "name: string (e.g., 'LanÃ§amento TRINTAE3 v2', 'ReformulaÃ§Ã£o Suporte')"
          - "slug: string"
          - "description: string"
          - "icon: string"
          - "color: string"
          - "status: 'backlog' | 'planned' | 'in_progress' | 'paused' | 'completed' | 'canceled'"
          - "lead_id: string | null"
          - "start_date: number | null"
          - "target_date: number | null"
          - "completed_at: number | null"
          - "progress: number (0-100, calculated from issues)"
        indexes:
          - "by_workspace_status: for project list"
          - "by_team: for team's projects"
      project_milestone:
        fields:
          - "project_id: Id<projects>"
          - "name: string"
          - "description: string | null"
          - "target_date: number"
          - "sort_order: number"

  module_8_cycles:
    description: "Time-boxed sprints for focused work"
    entities:
      cycle:
        fields:
          - "team_id: Id<teams>"
          - "name: string (e.g., 'Sprint 23', 'Janeiro W3')"
          - "number: number (auto-incremented per team)"
          - "start_date: number"
          - "end_date: number"
          - "status: 'upcoming' | 'active' | 'completed'"
          - "goal: string | null"
          - "progress: number (calculated)"
        indexes:
          - "by_team_status: for cycle list"
          - "by_team_number: unique"
    cycle_settings:
      default_duration: "2 weeks"
      auto_archive_completed: true
      rollover_incomplete: true

  module_9_views_and_filters:
    description: "Saved views for common queries"
    entities:
      saved_view:
        fields:
          - "workspace_id: Id<workspaces>"
          - "team_id: Id<teams> | null"
          - "creator_id: string"
          - "name: string"
          - "filters: FilterConfig"
          - "display: 'list' | 'board' | 'calendar' | 'timeline'"
          - "sort_by: string"
          - "sort_direction: 'asc' | 'desc'"
          - "is_shared: boolean"
    filter_options:
      - "state (multiple selection)"
      - "assignee (multiple selection + unassigned)"
      - "priority (range)"
      - "label (multiple selection)"
      - "project (multiple selection)"
      - "cycle (current, specific, none)"
      - "due_date (overdue, today, this week, no date)"
      - "created_at (date range)"
      - "creator (multiple selection)"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 6: INTEGRATION POINTS (Slack â†” Linear Connection)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
integration_features:

  channel_to_issue:
    description: "Create issues directly from channel messages"
    flow:
      - "User selects message â†’ 'Create Issue' action"
      - "Modal opens with message content as description"
      - "User selects team, priority, assignee"
      - "Issue created with link back to original message"
      - "Bot posts in channel: 'Issue DEV-123 created from this message'"

  issue_to_channel:
    description: "Link issues to channels for discussion"
    flow:
      - "Issue can have linked_channel_id"
      - "Updates to issue post to linked channel"
      - "Channel members notified of state changes"

  unified_search:
    description: "Search across messages and issues"
    implementation:
      - "Global command palette (Cmd+K)"
      - "Search messages: prefix with 'm:' or filter"
      - "Search issues: prefix with 'i:' or filter"
      - "Recent items shown by default"
      - "Keyboard navigation throughout"

  unified_notifications:
    description: "Single notification inbox for both systems"
    types:
      - "Message mentions"
      - "DM received"
      - "Thread replies"
      - "Issue assigned to you"
      - "Issue state changed (for your issues)"
      - "Issue commented (for your issues)"
      - "Cycle starting/ending"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 7: UI/UX SPECIFICATIONS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ui_specifications:

  layout:
    description: "Linear-inspired minimal layout with Slack-style sidebar"
    structure:
      - "Fixed sidebar (collapsible): workspace switcher, navigation"
      - "Main content area: channel/issue view"
      - "Right panel (contextual): thread view, issue details"

  navigation_sidebar:
    sections:
      - "Workspace header with dropdown"
      - "Quick actions: New message, New issue (Cmd+N)"
      - "Communication section:"
      - "  - Threads (unread thread replies)"
      - "  - DMs (direct messages)"
      - "  - Channels (starred first, then by category)"
      - "Project section:"
      - "  - My Issues"
      - "  - Active Cycle"
      - "  - Projects (grouped by team)"
      - "  - Teams"
      - "Collapsible team sections with issues/channels"

  keyboard_shortcuts:
    global:
      - "Cmd+K: Command palette (search everything)"
      - "Cmd+N: New (context-aware: message or issue)"
      - "Cmd+/: Show shortcuts"
      - "Cmd+[: Go back"
      - "Cmd+]: Go forward"
    messaging:
      - "Cmd+Enter: Send message"
      - "Up arrow: Edit last message"
      - "T: Open thread"
      - "R: React with last emoji"
      - "E: Open emoji picker"
    issues:
      - "C: New issue"
      - "S: Change state"
      - "A: Assign"
      - "P: Set priority"
      - "L: Add label"
      - "M: Move to project"
      - "Enter: Open issue"
      - "Esc: Close panel"

  command_palette:
    description: "Linear-style fuzzy search command palette"
    features:
      - "Fuzzy search across channels, issues, projects, users"
      - "Action commands: 'Create issue', 'New channel', etc"
      - "Recent items"
      - "Keyboard navigation"
      - "Context-aware suggestions"

  responsive_design:
    breakpoints:
      mobile: "<640px: Single panel, bottom nav"
      tablet: "640-1024px: Collapsible sidebar"
      desktop: ">1024px: Full three-panel layout"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 8: CHAIN OF THOUGHT PROCESS
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
chain_of_thought:
  analyze:
    core_requirements:
      - "Real-time messaging with threading and reactions"
      - "Issue tracking with customizable workflows"
      - "Project and cycle management"
      - "Unified search and navigation"
      - "Keyboard-first interaction model"
    technical_constraints:
      - "Convex's document-based model (no JOINs)"
      - "Optimistic updates for perceived performance"
      - "LGPD compliance for data retention"
      - "Mobile responsiveness"
    expected_output:
      - "Fully functional collaboration platform"
      - "Slack-quality messaging experience"
      - "Linear-quality issue tracking"
      - "Seamless integration between both"

  think:
    tree_of_thoughts:
      approach_a:
        description: "Separate apps with shared backend"
        pros:
          - "Simpler mental model"
          - "Independent deployment"
        cons:
          - "Context switching for users"
          - "Duplicate navigation code"
          - "Harder to integrate"
        viability_score: 2

      approach_b:
        description: "Unified app with module-based architecture"
        pros:
          - "Single navigation"
          - "Shared components"
          - "Integrated search"
          - "Consistent UX"
        cons:
          - "More complex initial setup"
          - "Larger bundle (mitigate with code splitting)"
        viability_score: 5

      approach_c:
        description: "Messaging-first with embedded issue tracking"
        pros:
          - "Familiar Slack-like flow"
          - "Issues as enhanced messages"
        cons:
          - "Limited issue management"
          - "Doesn't match Linear's power"
        viability_score: 3

      selected_approach: "approach_b â€” Unified app with module-based architecture"
      rationale: |
        GPUS users need both communication AND project tracking daily.
        A unified app with shared navigation, search, and components
        provides the best user experience while maintaining code quality.
        Code splitting mitigates bundle size concerns.

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 9: ATOMIC TASKS (Agent Runbook)
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
atomic_tasks:

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PHASE 1: FOUNDATION (Week 1)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "AT-001"
    title: "Create Convex schema for workspaces and members"
    phase: 1
    priority: "critical"
    dependencies: []
    parallel_safe: true
    implementation:
      files_to_create:
        - "convex/schema/workspaces.ts"
      files_to_modify:
        - "convex/schema.ts (import and merge)"
      validation: "npx convex dev --typecheck && bun run test convex/"
      rollback: "git checkout convex/schema.ts"
    acceptance_criteria:
      - "workspaces table with all specified fields"
      - "workspace_members table with roles"
      - "Proper indexes for common queries"
      - "TypeScript types generated and exported"

  - id: "AT-002"
    title: "Create Convex schema for channels and members"
    phase: 1
    priority: "critical"
    dependencies: []
    parallel_safe: true
    implementation:
      files_to_create:
        - "convex/schema/channels.ts"
      validation: "npx convex dev --typecheck"
      rollback: "git checkout convex/"
    acceptance_criteria:
      - "channels table with type discrimination"
      - "channel_members with last_read tracking"
      - "Indexes for unread calculation"

  - id: "AT-003"
    title: "Create Convex schema for messages, reactions, attachments"
    phase: 1
    priority: "critical"
    dependencies: []
    parallel_safe: true
    implementation:
      files_to_create:
        - "convex/schema/messages.ts"
      validation: "npx convex dev --typecheck"
      rollback: "git checkout convex/"
    acceptance_criteria:
      - "messages table with thread support"
      - "reactions table with unique constraint"
      - "Proper indexes for paginated queries"

  - id: "AT-004"
    title: "Create Convex schema for teams and issues (Linear-style)"
    phase: 1
    priority: "critical"
    dependencies: []
    parallel_safe: true
    implementation:
      files_to_create:
        - "convex/schema/teams.ts"
        - "convex/schema/issues.ts"
        - "convex/schema/workflows.ts"
      validation: "npx convex dev --typecheck"
      rollback: "git checkout convex/"
    acceptance_criteria:
      - "teams with workflow settings"
      - "issues with all Linear-style fields"
      - "workflow_states with type discrimination"
      - "labels and issue_comments"
      - "issue_activity for audit trail"

  - id: "AT-005"
    title: "Create Convex schema for projects and cycles"
    phase: 1
    priority: "high"
    dependencies: []
    parallel_safe: true
    implementation:
      files_to_create:
        - "convex/schema/projects.ts"
        - "convex/schema/cycles.ts"
      validation: "npx convex dev --typecheck"
      rollback: "git checkout convex/"
    acceptance_criteria:
      - "projects with multi-team support"
      - "cycles with auto-numbering"
      - "project_milestones"

  - id: "AT-006"
    title: "Implement workspace CRUD mutations"
    phase: 1
    priority: "critical"
    dependencies: ["AT-001"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "convex/workspaces.ts"
      validation: "bun run test convex/workspaces.test.ts"
      rollback: "rm convex/workspaces.ts"
    acceptance_criteria:
      - "createWorkspace with owner assignment"
      - "updateWorkspace with permission check"
      - "addMember, removeMember, updateMemberRole"
      - "getWorkspace, getUserWorkspaces queries"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PHASE 2: MESSAGING CORE (Week 2)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "AT-007"
    title: "Implement channel CRUD mutations"
    phase: 2
    priority: "critical"
    dependencies: ["AT-002", "AT-006"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "convex/channels.ts"
      validation: "bun run test convex/channels.test.ts"
      rollback: "rm convex/channels.ts"
    acceptance_criteria:
      - "createChannel (public, private, DM)"
      - "updateChannel, archiveChannel"
      - "joinChannel, leaveChannel"
      - "getChannel, getWorkspaceChannels, getUserChannels"
      - "DM creation finds existing or creates new"

  - id: "AT-008"
    title: "Implement messaging mutations with real-time"
    phase: 2
    priority: "critical"
    dependencies: ["AT-003", "AT-007"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "convex/messages.ts"
      validation: "bun run test convex/messages.test.ts"
      rollback: "rm convex/messages.ts"
    acceptance_criteria:
      - "sendMessage with mention parsing"
      - "editMessage, deleteMessage (soft delete)"
      - "replyInThread"
      - "getMessages (paginated, real-time)"
      - "getThreadReplies"
      - "Optimistic updates configured"

  - id: "AT-009"
    title: "Implement reactions mutations"
    phase: 2
    priority: "high"
    dependencies: ["AT-008"]
    parallel_safe: false
    implementation:
      files_to_modify:
        - "convex/messages.ts (add reaction functions)"
      validation: "bun run test convex/messages.test.ts"
      rollback: "git checkout convex/messages.ts"
    acceptance_criteria:
      - "addReaction (toggle behavior)"
      - "removeReaction"
      - "Reaction summary denormalization"

  - id: "AT-010"
    title: "Build ChannelList component"
    phase: 2
    priority: "critical"
    dependencies: ["AT-007"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/features/collab/components/ChannelList.tsx"
        - "src/features/collab/hooks/useChannels.ts"
      validation: "bun run test src/features/collab/"
      rollback: "rm -rf src/features/collab/"
    acceptance_criteria:
      - "Grouped by category (starred, public, private)"
      - "Unread badge calculation"
      - "Create channel button"
      - "Search/filter channels"
      - "Keyboard navigation"

  - id: "AT-011"
    title: "Build MessageList and MessageItem components"
    phase: 2
    priority: "critical"
    dependencies: ["AT-008"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/features/collab/components/MessageList.tsx"
        - "src/features/collab/components/MessageItem.tsx"
        - "src/features/collab/components/MessageReactions.tsx"
      validation: "bun run test src/features/collab/"
    acceptance_criteria:
      - "Virtualized list for performance"
      - "Date separators"
      - "User avatar, name, timestamp"
      - "Markdown rendering"
      - "Reaction display and interaction"
      - "Thread indicator and reply count"
      - "Hover actions (react, reply, more)"

  - id: "AT-012"
    title: "Build MessageComposer component"
    phase: 2
    priority: "critical"
    dependencies: ["AT-008"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/features/collab/components/MessageComposer.tsx"
        - "src/features/collab/components/MentionAutocomplete.tsx"
        - "src/features/collab/components/EmojiPicker.tsx"
      validation: "bun run test src/features/collab/"
    acceptance_criteria:
      - "Rich text input with formatting toolbar"
      - "@mention autocomplete"
      - "Emoji picker"
      - "File attachment (drag & drop)"
      - "Cmd+Enter to send"
      - "Typing indicator"

  - id: "AT-013"
    title: "Build ThreadPanel component"
    phase: 2
    priority: "high"
    dependencies: ["AT-011", "AT-012"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/features/collab/components/ThreadPanel.tsx"
      validation: "bun run test src/features/collab/"
    acceptance_criteria:
      - "Opens in right sidebar"
      - "Shows parent message"
      - "Thread replies below"
      - "Composer for new replies"
      - "'Also send to channel' checkbox"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PHASE 3: ISSUE TRACKING CORE (Week 3)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "AT-014"
    title: "Implement team CRUD mutations"
    phase: 3
    priority: "critical"
    dependencies: ["AT-004"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "convex/teams.ts"
      validation: "bun run test convex/teams.test.ts"
    acceptance_criteria:
      - "createTeam with default workflow"
      - "updateTeam, archiveTeam"
      - "Team member management"
      - "Default workflow states seeding"

  - id: "AT-015"
    title: "Implement issue CRUD mutations"
    phase: 3
    priority: "critical"
    dependencies: ["AT-004", "AT-014"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "convex/issues.ts"
      validation: "bun run test convex/issues.test.ts"
    acceptance_criteria:
      - "createIssue with auto-identifier (e.g., SUP-123)"
      - "updateIssue with activity logging"
      - "changeState, assignIssue, setPriority"
      - "addLabel, removeLabel"
      - "getIssue, getTeamIssues (with filters)"
      - "getMyIssues"

  - id: "AT-016"
    title: "Implement issue comments and activity"
    phase: 3
    priority: "high"
    dependencies: ["AT-015"]
    parallel_safe: false
    implementation:
      files_to_modify:
        - "convex/issues.ts"
      validation: "bun run test convex/issues.test.ts"
    acceptance_criteria:
      - "addComment, editComment, deleteComment"
      - "Activity auto-logging on state/assignment changes"
      - "getIssueActivity"

  - id: "AT-017"
    title: "Build IssueList component (list and board views)"
    phase: 3
    priority: "critical"
    dependencies: ["AT-015"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/features/issues/components/IssueList.tsx"
        - "src/features/issues/components/IssueBoard.tsx"
        - "src/features/issues/components/IssueRow.tsx"
        - "src/features/issues/components/IssueCard.tsx"
      validation: "bun run test src/features/issues/"
    acceptance_criteria:
      - "List view with sortable columns"
      - "Board view (Kanban) with drag-and-drop"
      - "Toggle between views"
      - "Filter bar"
      - "Keyboard shortcuts (S for state, A for assign, etc)"

  - id: "AT-018"
    title: "Build IssueDetail panel"
    phase: 3
    priority: "critical"
    dependencies: ["AT-016", "AT-017"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/features/issues/components/IssueDetail.tsx"
        - "src/features/issues/components/IssueActivity.tsx"
        - "src/features/issues/components/IssueSidebar.tsx"
      validation: "bun run test src/features/issues/"
    acceptance_criteria:
      - "Title inline editing"
      - "Description with Markdown editor"
      - "Sidebar: state, priority, assignee, labels, project, cycle"
      - "Activity feed with comments"
      - "Sub-issues list"

  - id: "AT-019"
    title: "Build CreateIssue modal"
    phase: 3
    priority: "high"
    dependencies: ["AT-015"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/features/issues/components/CreateIssueModal.tsx"
      validation: "bun run test src/features/issues/"
    acceptance_criteria:
      - "Quick create (just title)"
      - "Full create (all fields)"
      - "Team selection"
      - "Keyboard shortcut: C"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PHASE 4: PROJECTS, CYCLES & INTEGRATION (Week 4)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "AT-020"
    title: "Implement project mutations"
    phase: 4
    priority: "high"
    dependencies: ["AT-005", "AT-015"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "convex/projects.ts"
      validation: "bun run test convex/projects.test.ts"
    acceptance_criteria:
      - "createProject, updateProject"
      - "Progress calculation from issues"
      - "getProject, getWorkspaceProjects"
      - "addIssueToProject, removeIssueFromProject"

  - id: "AT-021"
    title: "Implement cycle mutations"
    phase: 4
    priority: "high"
    dependencies: ["AT-005", "AT-015"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "convex/cycles.ts"
      validation: "bun run test convex/cycles.test.ts"
    acceptance_criteria:
      - "createCycle with auto-numbering"
      - "startCycle, completeCycle"
      - "getCurrentCycle, getTeamCycles"
      - "addIssueToCycle, removeIssueFromCycle"

  - id: "AT-022"
    title: "Build unified navigation sidebar"
    phase: 4
    priority: "critical"
    dependencies: ["AT-010", "AT-017"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/components/layout/AppSidebar.tsx"
        - "src/components/layout/WorkspaceSwitcher.tsx"
        - "src/components/layout/NavigationSection.tsx"
      validation: "bun run test src/components/layout/"
    acceptance_criteria:
      - "Collapsible sections"
      - "Workspace switcher dropdown"
      - "Communication section (channels, DMs, threads)"
      - "Issues section (my issues, active cycle)"
      - "Projects section"
      - "Teams with nested items"
      - "Unread badges throughout"

  - id: "AT-023"
    title: "Build Command Palette (Cmd+K)"
    phase: 4
    priority: "critical"
    dependencies: ["AT-008", "AT-015"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/components/CommandPalette.tsx"
        - "src/hooks/useCommandPalette.ts"
        - "src/hooks/useGlobalSearch.ts"
      validation: "bun run test src/components/CommandPalette.test.tsx"
    acceptance_criteria:
      - "Global keyboard shortcut Cmd+K"
      - "Fuzzy search across channels, issues, projects, users"
      - "Action commands (create issue, new channel, etc)"
      - "Recent items section"
      - "Full keyboard navigation"
      - "Escape to close"

  - id: "AT-024"
    title: "Implement message-to-issue integration"
    phase: 4
    priority: "high"
    dependencies: ["AT-008", "AT-015"]
    parallel_safe: false
    implementation:
      files_to_modify:
        - "convex/issues.ts"
        - "src/features/collab/components/MessageItem.tsx"
      files_to_create:
        - "src/features/collab/components/CreateIssueFromMessage.tsx"
      validation: "bun run test"
    acceptance_criteria:
      - "Context menu action 'Create Issue'"
      - "Modal with message content as description"
      - "Link stored between issue and message"
      - "Bot message posted in channel"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # PHASE 5: NOTIFICATIONS, POLISH & VALIDATION (Week 5-6)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  - id: "AT-025"
    title: "Implement notification system"
    phase: 5
    priority: "high"
    dependencies: ["AT-008", "AT-015"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "convex/schema/notifications.ts"
        - "convex/notifications.ts"
        - "src/features/notifications/components/NotificationInbox.tsx"
        - "src/features/notifications/components/NotificationItem.tsx"
      validation: "bun run test"
    acceptance_criteria:
      - "Notification creation on mentions, DMs, thread replies"
      - "Notification on issue assignment, state change"
      - "Unified inbox UI"
      - "Mark as read (individual and bulk)"
      - "Notification badge in sidebar"

  - id: "AT-026"
    title: "Implement user presence system"
    phase: 5
    priority: "medium"
    dependencies: ["AT-001"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "convex/presence.ts"
        - "src/hooks/usePresence.ts"
      validation: "bun run test"
    acceptance_criteria:
      - "Online/away/DND status"
      - "Custom status text and emoji"
      - "Presence indicator on avatars"
      - "Auto-away after inactivity"

  - id: "AT-027"
    title: "Implement full-text search"
    phase: 5
    priority: "high"
    dependencies: ["AT-008", "AT-015"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "convex/search.ts"
        - "src/features/search/components/SearchResults.tsx"
      validation: "bun run test"
    acceptance_criteria:
      - "Message search with filters"
      - "Issue search with filters"
      - "Combined results in command palette"
      - "Highlight matched terms"

  - id: "AT-028"
    title: "Build ProjectDetail and CycleDetail views"
    phase: 5
    priority: "medium"
    dependencies: ["AT-020", "AT-021"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/features/projects/components/ProjectDetail.tsx"
        - "src/features/cycles/components/CycleDetail.tsx"
      validation: "bun run test"
    acceptance_criteria:
      - "Project overview with progress"
      - "Project issues list"
      - "Milestones timeline"
      - "Cycle burndown/progress"
      - "Cycle issues board"

  - id: "AT-029"
    title: "Implement keyboard shortcuts throughout"
    phase: 5
    priority: "high"
    dependencies: ["AT-022", "AT-023"]
    parallel_safe: true
    implementation:
      files_to_create:
        - "src/hooks/useKeyboardShortcuts.ts"
        - "src/components/ShortcutsHelp.tsx"
      files_to_modify:
        - "All major components"
      validation: "bun run test"
    acceptance_criteria:
      - "All specified shortcuts working"
      - "Shortcuts help modal (Cmd+/)"
      - "No conflicts between shortcuts"
      - "Context-aware (different in channel vs issue)"

  - id: "AT-030"
    title: "Final integration testing and polish"
    phase: 5
    priority: "critical"
    dependencies: ["AT-025", "AT-026", "AT-027", "AT-028", "AT-029"]
    parallel_safe: false
    implementation:
      files_to_create:
        - "tests/e2e/collab.spec.ts"
        - "tests/e2e/issues.spec.ts"
      validation: "bun run test && bun run test:e2e && bun run build"
      rollback: "N/A â€” final phase"
    acceptance_criteria:
      - "All unit tests passing"
      - "E2E tests for critical flows"
      - "Build succeeds with no errors"
      - "Performance acceptable (lighthouse)"
      - "LGPD compliance verified"
      - "Mobile responsive"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 10: VALIDATION GATES
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
validation:
  automated:
    - id: "VT-001"
      command: "bun run build"
      expected: "Exit code 0, no errors"
    - id: "VT-002"
      command: "bun run lint"
      expected: "No errors or warnings"
    - id: "VT-003"
      command: "bun run typecheck"
      expected: "No TypeScript errors"
    - id: "VT-004"
      command: "bun run test"
      expected: "All tests passing, >80% coverage"
    - id: "VT-005"
      command: "npx convex dev --typecheck"
      expected: "Schema valid, types generated"

  manual_review:
    - id: "VT-006"
      reviewer: "@code-reviewer"
      focus: "Security review for message handling, permission checks"
      required_if: "Phase 2+ complete"
    - id: "VT-007"
      reviewer: "@database-specialist"
      focus: "Convex schema optimization, index strategy"
      required_if: "Phase 1 complete"

  performance_benchmarks:
    - "Message list renders 100 messages in <100ms"
    - "Issue list renders 500 issues in <200ms"
    - "Command palette opens in <50ms"
    - "Real-time updates arrive in <500ms"

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 11: OUTPUT CONTRACT
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
output:
  format: "Production-ready collaboration platform with documentation"

  deliverables:
    phase_1:
      - "Complete Convex schema for all entities"
      - "Workspace and team management"
      - "Database seeding scripts"
    phase_2:
      - "Functional messaging with threads and reactions"
      - "Channel management"
      - "Message composer with mentions"
    phase_3:
      - "Issue tracking with workflow states"
      - "List and board views"
      - "Issue detail and creation"
    phase_4:
      - "Project and cycle management"
      - "Unified navigation"
      - "Command palette"
      - "Message-to-issue integration"
    phase_5:
      - "Notification system"
      - "User presence"
      - "Full-text search"
      - "Keyboard shortcuts"
      - "E2E tests"

  success_definition: |
    1. Users can send messages in channels with threading and reactions
    2. Users can create and manage issues with Linear-style workflow
    3. Users can organize work into projects and cycles
    4. Users can search across all content with Cmd+K
    5. Users receive notifications for relevant activities
    6. All interactions work with keyboard shortcuts
    7. Mobile responsive design works on all devices
    8. LGPD compliance maintained (data retention, consent)
    9. Performance benchmarks met
    10. Test coverage >80%

  failure_handling: |
    If Convex schema conflicts arise:
      - Review existing schema for conflicts
      - Create migration strategy
      - Test in development environment first

    If performance issues occur:
      - Profile with React DevTools
      - Optimize Convex queries with proper indexes
      - Implement pagination/virtualization

    If integration tests fail:
      - Isolate failing component
      - Check for race conditions in real-time updates
      - Review Convex optimistic update configuration

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# SECTION 12: BEHAVIOR CONFIGURATION
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
behavior:
  mode: "PROACTIVE"
  instruction: |
    By default, implement changes instead of suggesting them.
    Trust existing references and execute changes directly.
    Use tools to discover missing details instead of guessing.

  parallel_execution: |
    Execute parallel tool calls for:
    - Reading multiple schema files
    - Creating independent components
    - Running independent tests

    Sequential execution required for:
    - Schema creation before mutations
    - Mutations before components that use them
    - Component creation before integration

  reflection_protocol: |
    After each task completion:
    1. Run validation command
    2. Verify acceptance criteria
    3. Check for regressions
    4. Update progress tracking
    5. Proceed to next task or report blockers

  thinking_budget: "16000-32000 tokens (L8 complexity)"